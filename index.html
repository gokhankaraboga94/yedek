<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Türkiye'nin Enleri | Yarışma</title>
    <style>
        /* CSS TASARIM */
        :root {
            --male-color: #2196f3;
            --female-color: #e91e63;
            --bg-dark: #121212;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }

        body { background: #f4f4f9; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        header { 
            background: #1a1a2e; color: white; padding: 15px; text-align: center; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 10;
        }

        .main-nav { margin-top: 10px; display: flex; justify-content: center; gap: 10px; }
        .btn { 
            padding: 10px 20px; border: none; border-radius: 25px; cursor: pointer; 
            font-weight: bold; transition: 0.3s; color: white;
        }
        .btn-contest { background: #ff9800; }
        .btn-contest:hover { background: #e68900; }

        /* ANA KONTEYNER: EKRANI İKİYE BÖLME */
        .split-view { display: flex; flex: 1; overflow: hidden; position: relative; }

        .map-pane { 
            flex: 1; display: flex; flex-direction: column; align-items: center; 
            justify-content: center; padding: 20px; transition: 0.5s; position: relative;
        }

        .male-pane { background: #e3f2fd; border-right: 2px solid #ddd; }
        .female-pane { background: #fce4ec; }

        h2 { margin-bottom: 15px; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px; }
        .male-pane h2 { color: var(--male-color); }
        .female-pane h2 { color: var(--female-color); }

        /* SVG HARİTA STİLLERİ */
        .svg-container { width: 100%; max-width: 600px; height: auto; }
        .city { 
            fill: #ccc; stroke: #fff; stroke-width: 1.5; 
            cursor: pointer; transition: 0.3s; 
        }
        .city:hover { fill: #999; transform: scale(1.01); }
        .male-pane .city-active { fill: var(--male-color); }
        .female-pane .city-active { fill: var(--female-color); }

        /* MODAL (YÜKLEME VE OYLAMA EKRANI) */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; justify-content: center;
            align-items: center; z-index: 100;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 15px; 
            width: 90%; max-width: 500px; text-align: center;
        }
        .form-group { margin-bottom: 15px; text-align: left; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }

        /* MOBİL SEKME YAPISI */
        .mobile-tabs { 
            display: none; background: white; border-top: 1px solid #ddd; 
            justify-content: space-around; padding: 10px 0;
        }

        @media (max-width: 768px) {
            .split-view { flex-direction: column; }
            .map-pane { display: none; width: 100%; }
            .map-pane.active { display: flex; }
            .mobile-tabs { display: flex; }
            header h1 { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

<header>
    <h1>Türkiye'nin En Güzeli & En Yakışıklısı</h1>
    <div class="main-nav">
        <button class="btn btn-contest" onclick="toggleModal('uploadModal', true)">Yarışmacı Ol</button>
    </div>
</header>

<div class="split-view">
    <div class="map-pane male-pane active" id="maleMap">
        <h2>ERKEKLER HARİTASI</h2>
        <div class="svg-container">
            <svg viewBox="0 0 1000 480">
                <path id="m-34" d="M220,60 L280,60 L280,100 L220,100 Z" class="city" onclick="handleCityClick(34, 'male')" />
                <text x="235" y="85" fill="white" font-weight="bold" pointer-events="none">34</text>
                
                <path id="m-06" d="M420,150 L490,150 L490,210 L420,210 Z" class="city" onclick="handleCityClick(06, 'male')" />
                <text x="440" y="190" fill="white" font-weight="bold" pointer-events="none">06</text>
                
                </svg>
        </div>
        <p>İl seçerek oylamaya katıl</p>
    </div>

    <div class="map-pane female-pane" id="femaleMap">
        <h2>KADINLAR HARİTASI</h2>
        <div class="svg-container">
            <svg viewBox="0 0 1000 480">
                <path id="f-34" d="M220,60 L280,60 L280,100 L220,100 Z" class="city" onclick="handleCityClick(34, 'female')" />
                <text x="235" y="85" fill="white" font-weight="bold" pointer-events="none">34</text>

                <path id="f-06" d="M420,150 L490,150 L490,210 L420,210 Z" class="city" onclick="handleCityClick(06, 'female')" />
                <text x="440" y="190" fill="white" font-weight="bold" pointer-events="none">06</text>
            </svg>
        </div>
        <p>İl seçerek oylamaya katıl</p>
    </div>
</div>

<div class="mobile-tabs">
    <button class="btn" style="background: var(--male-color);" onclick="switchTab('male')">Erkekler</button>
    <button class="btn" style="background: var(--female-color);" onclick="switchTab('female')">Kadınlar</button>
</div>

<div id="uploadModal" class="modal">
    <div class="modal-content">
        <h3>Yarışmaya Katıl</h3>
        <p style="font-size: 0.8rem; margin-bottom: 15px;">Kendi görselini yükle ve şehrini temsil et.</p>
        <div class="form-group">
            <label>Cinsiyet</label>
            <select id="genderSelect">
                <option value="male">Erkek</option>
                <option value="female">Kadın</option>
            </select>
        </div>
        <div class="form-group">
            <label>Şehir (Plaka Kodu)</label>
            <input type="number" id="cityCode" placeholder="Örn: 34">
        </div>
        <div class="form-group">
            <label>Fotoğraf Seç</label>
            <input type="file" id="photoInput" accept="image/*">
        </div>
        <button class="btn btn-contest" style="width: 100%;" onclick="uploadData()">Gönder</button>
        <button class="btn" style="background:#666; width: 100%; margin-top:10px;" onclick="toggleModal('uploadModal', false)">Kapat</button>
    </div>
</div>

<div id="voteModal" class="modal">
    <div class="modal-content">
        <h3 id="voteTitle">Şehir Oylaması</h3>
        <div id="candidateList" style="margin-top: 20px; max-height: 300px; overflow-y: auto;">
            <p>Bu şehirde henüz aday yok.</p>
        </div>
        <button class="btn" style="background:#666; width: 100%; margin-top:20px;" onclick="toggleModal('voteModal', false)">Kapat</button>
    </div>
</div>

<script>
    // JS MANTIĞI

    // Mobil Sekme Değiştirme
    function switchTab(gender) {
        document.getElementById('maleMap').classList.toggle('active', gender === 'male');
        document.getElementById('femaleMap').classList.toggle('active', gender === 'female');
    }

    // Modal Aç/Kapat
    function toggleModal(id, show) {
        document.getElementById(id).style.display = show ? 'flex' : 'none';
    }

    // Şehir Tıklama (Oylama Listesini Açma)
    function handleCityClick(cityId, gender) {
        const title = `${cityId} Plakalı Şehir - ${gender === 'male' ? 'Erkek' : 'Kadın'} Adaylar`;
        document.getElementById('voteTitle').innerText = title;
        
        // Burada Firebase'den veri çekilecek. Şimdilik simülasyon:
        const candidateList = document.getElementById('candidateList');
        candidateList.innerHTML = `
            <div style="border:1px solid #ddd; padding:10px; border-radius:10px; margin-bottom:10px; display:flex; align-items:center; justify-content:space-between;">
                <div style="width:50px; height:50px; background:#ccc; border-radius:50%;"></div>
                <span>Aday #1</span>
                <button class="btn" style="background:green;" onclick="vote(1)">Oy Ver</button>
            </div>
        `;
        
        toggleModal('voteModal', true);
    }

    // Fotoğraf Yükleme Simülasyonu
    function uploadData() {
        const city = document.getElementById('cityCode').value;
        const gender = document.getElementById('genderSelect').value;
        const file = document.getElementById('photoInput').files[0];

        if(!city || !file) {
            alert("Lütfen tüm alanları doldurun!");
            return;
        }

        alert(`Başarılı! ${city} şehri için ${gender} kategorisinde başvurunuz alındı. (Firebase entegrasyonu buraya gelecek)`);
        toggleModal('uploadModal', false);
    }

    // Oylama Sınırı (LocalStorage Kullanımı)
    function vote(candidateId) {
        const hasVoted = localStorage.getItem('voted_' + candidateId);
        if(hasVoted) {
            alert("Bu adaya zaten oy verdiniz!");
            return;
        }

        // Oy verme işlemi
        localStorage.setItem('voted_' + candidateId, 'true');
        alert("Oyunuz kaydedildi! Gerçek zamanlı güncelleniyor...");
        toggleModal('voteModal', false);
    }
</script>

</body>
</html>
